(window.webpackJsonp=window.webpackJsonp||[]).push([[15],{387:function(t,s,a){"use strict";a.r(s);var e=a(18),r=Object(e.a)({},(function(){var t=this,s=t.$createElement,a=t._self._c||s;return a("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[a("h1",{attrs:{id:"配置文件格式"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#配置文件格式"}},[t._v("#")]),t._v(" 配置文件格式")]),t._v(" "),a("h2",{attrs:{id:"overview"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#overview"}},[t._v("#")]),t._v(" Overview")]),t._v(" "),a("p",[t._v("V2Ray 的配置文件形式如下，客户端和服务器通用一种形式，只是实际的配置不一样。")]),t._v(" "),a("p",[t._v("如果你刚接触 V2Ray，应当从了解 Inbounds 和 Outbounds 开始，只填必须的选项即可启动程序。接下来循序渐进了解其它组件，你会发现 V2Ray 并不难掌握。")]),t._v(" "),a("div",{staticClass:"language-json extra-class"},[a("pre",{pre:!0,attrs:{class:"language-json"}},[a("code",[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token property"}},[t._v('"log"')]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token property"}},[t._v('"api"')]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token property"}},[t._v('"dns"')]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token property"}},[t._v('"routing"')]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token property"}},[t._v('"policy"')]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token property"}},[t._v('"inbounds"')]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token property"}},[t._v('"outbounds"')]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token property"}},[t._v('"transport"')]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token property"}},[t._v('"stats"')]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token property"}},[t._v('"reverse"')]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])]),a("blockquote",[a("p",[a("code",[t._v("log")]),t._v(": "),a("a",{attrs:{href:"#logobject"}},[t._v("LogObject")])])]),t._v(" "),a("p",[t._v("日志配置，表示 V2Ray 如何输出日志。")]),t._v(" "),a("blockquote",[a("p",[a("code",[t._v("api")]),t._v(": "),a("a",{attrs:{href:"#apiobject"}},[t._v("ApiObject")])])]),t._v(" "),a("p",[t._v("内置的远程控制 API，详见"),a("a",{attrs:{href:"#apiobject"}},[t._v("远程控制配置")]),t._v("。")]),t._v(" "),a("blockquote",[a("p",[a("code",[t._v("dns")]),t._v(": "),a("RouterLink",{attrs:{to:"/config/dns.html"}},[t._v("DnsObject")])],1)]),t._v(" "),a("p",[t._v("内置的 DNS 服务器，若此项不存在，则默认使用本机的 DNS 设置。详见"),a("RouterLink",{attrs:{to:"/config/dns.html"}},[t._v("DNS 配置")])],1),t._v(" "),a("blockquote",[a("p",[a("code",[t._v("routing")]),t._v(": "),a("RouterLink",{attrs:{to:"/config/routing.html"}},[t._v("RoutingObject")])],1)]),t._v(" "),a("p",[a("RouterLink",{attrs:{to:"/config/routing.html"}},[t._v("路由配置")])],1),t._v(" "),a("blockquote",[a("p",[a("code",[t._v("policy")]),t._v(": "),a("RouterLink",{attrs:{to:"/config/policy.html"}},[t._v("PolicyObject")])],1)]),t._v(" "),a("p",[t._v("本地策略可进行一些权限相关的配置，详见"),a("RouterLink",{attrs:{to:"/config/policy.html"}},[t._v("本地策略")])],1),t._v(" "),a("blockquote",[a("p",[a("code",[t._v("inbounds")]),t._v(": ["),a("RouterLink",{attrs:{to:"/config/inbounds.html#inboundobject"}},[t._v("InboundObject")]),t._v("]")],1)]),t._v(" "),a("p",[t._v("一个数组，每个元素是一个"),a("RouterLink",{attrs:{to:"/config/inbounds.html#inboundobject"}},[t._v("入站连接配置")]),t._v("。")],1),t._v(" "),a("blockquote",[a("p",[a("code",[t._v("outbounds")]),t._v(": ["),a("RouterLink",{attrs:{to:"/config/outbounds.html#outboundobject"}},[t._v("OutboundObject")]),t._v("]")],1)]),t._v(" "),a("p",[t._v("一个数组，每个元素是一个"),a("RouterLink",{attrs:{to:"/config/outbounds.html#outboundobject"}},[t._v("出站连接配置")]),t._v("。列表中的第一个元素作为主出站协议。当路由匹配不存在或没有匹配成功时，流量由主出站协议发出。")],1),t._v(" "),a("blockquote",[a("p",[a("code",[t._v("transport")]),t._v(": "),a("RouterLink",{attrs:{to:"/config/transport.html"}},[t._v("TransportObject")])],1)]),t._v(" "),a("p",[t._v("用于配置 V2Ray 如何与其它服务器建立和使用网络连接。详见"),a("RouterLink",{attrs:{to:"/config/transport.html"}},[t._v("底层传输配置")])],1),t._v(" "),a("blockquote",[a("p",[a("code",[t._v("stats")]),t._v(": "),a("RouterLink",{attrs:{to:"/config/stats.html"}},[t._v("StatsObject")])],1)]),t._v(" "),a("p",[t._v("当此项存在时，开启"),a("RouterLink",{attrs:{to:"/config/stats.html"}},[t._v("统计信息")]),t._v("。")],1),t._v(" "),a("blockquote",[a("p",[a("code",[t._v("reverse")]),t._v(": "),a("RouterLink",{attrs:{to:"/config/reverse.html"}},[t._v("ReverseObject")])],1)]),t._v(" "),a("p",[a("RouterLink",{attrs:{to:"/config/reverse.html"}},[t._v("反向代理")]),t._v("配置。")],1),t._v(" "),a("h2",{attrs:{id:"logobject"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#logobject"}},[t._v("#")]),t._v(" LogObject")]),t._v(" "),a("p",[a("code",[t._v("LogObject")]),t._v(" 对应配置文件的 "),a("code",[t._v("log")]),t._v(" 项。")]),t._v(" "),a("div",{staticClass:"language-json extra-class"},[a("pre",{pre:!0,attrs:{class:"language-json"}},[a("code",[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token property"}},[t._v('"access"')]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"文件地址"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token property"}},[t._v('"error"')]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"文件地址"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token property"}},[t._v('"loglevel"')]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"warning"')]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])]),a("blockquote",[a("p",[a("code",[t._v("access")]),t._v(": string")])]),t._v(" "),a("p",[t._v("访问日志的文件地址，其值是一个合法的文件地址，如"),a("code",[t._v('"/tmp/v2ray/_access.log"')]),t._v("（Linux）或者"),a("code",[t._v('"C:\\\\Temp\\\\v2ray\\\\_access.log"')]),t._v("（Windows）。当此项不指定或为空值时，表示将日志输出至 stdout。V2Ray 4.20 加入了特殊值"),a("code",[t._v("none")]),t._v("，即关闭 access log。")]),t._v(" "),a("blockquote",[a("p",[a("code",[t._v("error")]),t._v(": string")])]),t._v(" "),a("p",[t._v("错误日志的文件地址，其值是一个合法的文件地址，如"),a("code",[t._v('"/tmp/v2ray/_error.log"')]),t._v("（Linux）或者"),a("code",[t._v('"C:\\\\Temp\\\\v2ray\\\\_error.log"')]),t._v("（Windows）。当此项不指定或为空值时，表示将日志输出至 stdout。V2Ray 4.20 加入了特殊值"),a("code",[t._v("none")]),t._v("，即关闭 error log（跟"),a("code",[t._v('loglevel: "none"')]),t._v("等价）。")]),t._v(" "),a("blockquote",[a("p",[a("code",[t._v("loglevel")]),t._v(': "debug" | "info" | "warning" | "error" | "none"')])]),t._v(" "),a("p",[t._v("日志的级别。默认值为 "),a("code",[t._v('"warning"')]),t._v("。")]),t._v(" "),a("ul",[a("li",[a("code",[t._v('"debug"')]),t._v("：只有开发人员能看懂的信息。同时包含所有 "),a("code",[t._v('"info"')]),t._v(" 内容。")]),t._v(" "),a("li",[a("code",[t._v('"info"')]),t._v("：V2Ray 在运行时的状态，不影响正常使用。同时包含所有 "),a("code",[t._v('"warning"')]),t._v(" 内容。")]),t._v(" "),a("li",[a("code",[t._v('"warning"')]),t._v("：V2Ray 遇到了一些问题，通常是外部问题，不影响 V2Ray 的正常运行，但有可能影响用户的体验。同时包含所有 "),a("code",[t._v('"error"')]),t._v(" 内容。")]),t._v(" "),a("li",[a("code",[t._v('"error"')]),t._v("：V2Ray 遇到了无法正常运行的问题，需要立即解决。")]),t._v(" "),a("li",[a("code",[t._v('"none"')]),t._v("：不记录任何内容。")])]),t._v(" "),a("h2",{attrs:{id:"apiobject"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#apiobject"}},[t._v("#")]),t._v(" ApiObject")]),t._v(" "),a("p",[a("code",[t._v("ApiObject")]),t._v(" 对应配置文件的 "),a("code",[t._v("api")]),t._v(" 项。")]),t._v(" "),a("p",[t._v("V2Ray 中可以开放一些 API 以便远程调用。这些 API 都基于 "),a("a",{attrs:{href:"https://grpc.io/",target:"_blank",rel:"noopener noreferrer"}},[t._v("gRPC"),a("OutboundLink")],1),t._v("。大多数用户并不会用到此 API，新手可以直接忽略这一项。")]),t._v(" "),a("p",[t._v("当远程控制开启时，V2Ray 会自建一个出站代理，以 "),a("code",[t._v("tag")]),t._v(" 配置的值为标识。用户必须手动将所有的 gRPC 入站连接通过 "),a("RouterLink",{attrs:{to:"/config/routing.html"}},[t._v("路由")]),t._v(" 指向这一出站代理。")],1),t._v(" "),a("div",{staticClass:"language-json extra-class"},[a("pre",{pre:!0,attrs:{class:"language-json"}},[a("code",[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token property"}},[t._v('"tag"')]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"api"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token property"}},[t._v('"services"')]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("\n        "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"HandlerService"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n        "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"LoggerService"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n        "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"StatsService"')]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])]),a("blockquote",[a("p",[a("code",[t._v("tag")]),t._v(": string")])]),t._v(" "),a("p",[t._v("出站代理标识")]),t._v(" "),a("blockquote",[a("p",[a("code",[t._v("services")]),t._v(": [string]")])]),t._v(" "),a("p",[t._v("开启的 API 列表，可选的值见 "),a("a",{attrs:{href:"#%E6%94%AF%E6%8C%81%E7%9A%84-api-%E5%88%97%E8%A1%A8"}},[t._v("API 列表")]),t._v("。")]),t._v(" "),a("h3",{attrs:{id:"支持的-api-列表"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#支持的-api-列表"}},[t._v("#")]),t._v(" 支持的 API 列表")]),t._v(" "),a("h3",{attrs:{id:"handlerservice"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#handlerservice"}},[t._v("#")]),t._v(" HandlerService")]),t._v(" "),a("p",[t._v("一些对于入站出站代理进行修改的 API，可用的功能如下：")]),t._v(" "),a("ul",[a("li",[t._v("添加一个新的入站代理；")]),t._v(" "),a("li",[t._v("添加一个新的出站代理；")]),t._v(" "),a("li",[t._v("删除一个现有的入站代理；")]),t._v(" "),a("li",[t._v("删除一个现有的出站代理；")]),t._v(" "),a("li",[t._v("在一个入站代理中添加一个用户（仅支持 VMess、VLESS）；")]),t._v(" "),a("li",[t._v("在一个入站代理中删除一个用户（仅支持 VMess、VLESS）；")])]),t._v(" "),a("h3",{attrs:{id:"loggerservice"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#loggerservice"}},[t._v("#")]),t._v(" LoggerService")]),t._v(" "),a("p",[t._v("支持对内置 Logger 的重启，可配合 logrotate 进行一些对日志文件的操作。")]),t._v(" "),a("h3",{attrs:{id:"statsservice"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#statsservice"}},[t._v("#")]),t._v(" StatsService")]),t._v(" "),a("p",[t._v("内置的数据统计服务，详见 "),a("RouterLink",{attrs:{to:"/config/stats.html"}},[t._v("统计信息")]),t._v("。")],1)])}),[],!1,null,null,null);s.default=r.exports}}]);